<%- include('./includes/head.ejs') %>
<link rel="stylesheet" href="/css/avatar.css" />
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="/js/avatar.js" defer></script>
</head>

<body>
  <%- include('./includes/header.ejs') %>
  <div class="flex-column bg-[#fdfdfd] w-11/12 sm:w-[584px] mx-auto my-8 p-6 rounded-md box-shadow">
    <form action="/my-profile" method="POST" class="flex flex-col mb-2 place-items-center" enctype="multipart/form-data">
      <div class="avatar-upload">
        <div class="avatar-edit">
          <input type='file' name="image" id="imageUpload" accept=".png, .jpg, .jpeg" class="w-3/4 rounded-md border-2 mr-1 file:bg-blue-500 file:mr-3 file:p-1 file:cursor-pointer file:border-none file:hover:bg-blue-400" />
          <label for="imageUpload"></label>
        </div>
        <div class="avatar-preview">
          <div id="imagePreview" style="background-image: url('<%= user.avatar %>');"></div>
        </div>
      </div>
      <button type="submit" disabled id="submitBtn" class="transition-all duration-300 bg-blue hover:bg-cyan-300 max-w-64 mb-4 w-3/4 mobile:w-10/12 p-1 text-lg rounded-md text-white disabled:cursor-not-allowed disabled:bg-gray-400 disabled:hover:bg-gray-300">
        Change image
      </button>
    </form>

    <div class="flex flex-col">
      <div class="flex items-center justify-center mb-2">
        <p class="mr-2 w-24">Username:</p>
        <p class="border-2 rounded-lg py-2 px-3 flex-1 text-center max-w-64 font-bold"><%= user.username %></p>
      </div>
      <div class="flex items-center justify-center mb-2">
        <p class="mr-2 w-24">Email:</p>
        <p class="border-2 rounded-lg py-2 px-3 flex-1 text-center max-w-64 font-bold"><%= user.email %></p>
      </div>
    </div>

    <a href="/reset-password" class="underline text-blue">Change password</a>
  </div>
  <div class="">
    <h1 class="text-5xl text-center">Your Posts</h1>
    <%- include('./includes/posts.ejs') %>
  </div>
</body>

</html>